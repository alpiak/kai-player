(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{440:function(t,e,n){"use strict";n.r(e);var a=n(449),r=n(447);for(var o in r)"default"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);n(461);var i=n(1),u=Object(i.a)(r.default,a.a,a.b,!1,null,"58fce14d",null);u.options.__file="src\\app\\source\\search-pane.vue",e.default=u.exports},445:function(t,e,n){var a=n(460);"string"==typeof a&&(a=[[t.i,a,""]]);var r={hmr:!0,transform:void 0};n(2)(a,r),a.locals&&(t.exports=a.locals)},446:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(n(10)),o=a(n(37)),i=a(n(9)),u=a(n(14)),s=n(12),c=n(29),l=n(17),d=a(n(92)),p=a(n(91)),f=a(n(128)),h=a(n(282)),v=new AbortController;e.default={components:{draggable:f.default,vueLoading:h.default},data:function(){return{keywords:"",tracks:[],loading:!1}},computed:(0,u.default)({sources:function(){return this.sourceGroup.get()},queue:function(){this.queueGroup.get(this.queueGroup.active)},player:function(){return this.playerController.player},playingQueueIndex:{get:function(){return this.$store.state.queueModule.playingQueueIndex},set:function(t){this[l.UPDATE_PLAYING_QUEUE_INDEX](t)}},activeVisualizerType:{get:function(){return this.visualizer.activeType},set:function(t){this[l.UPDATE_ACTIVE_VISUALIZER_TYPE](t)}}},(0,s.mapState)({sourceGroup:function(t){return t.sourceModule.sourceGroup},queueGroup:function(t){return t.queueModule.queueGroup},playerController:function(t){return t.playerModule.playerController},visualizer:function(t){return t.visualizationModule.visualizer},i18next:function(t){return t.generalModule.i18next},showSourceIcon:function(t){return t.generalModule.showSourceIcon}})),methods:(0,u.default)({search:function(){var t=(0,i.default)(r.default.mark(function t(e){var n;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.sources.filter(function(t){return t.active}).map(function(t){return t.id}),this.loading=!0,t.prev=2,v.abort(),v=new AbortController,t.next=7,fetch("/audio/search",{method:"POST",body:(0,o.default)({keywords:e,sources:n}),headers:new Headers({"Content-Type":"application/json"}),signal:v.signal});case 7:return t.next=9,t.sent.json();case 9:t.t0=function(t){return new d.default({id:t.source+"_"+t.id,name:t.name,duration:t.duration||null,artists:t.artists.map(function(t){return new p.default({name:t.name})}),picture:function(){if(!t.picture)return null;var e=new URL(t.picture);return"/proxy/"+e.hostname+e.pathname}()})},this.tracks=t.sent.data.map(t.t0),t.next=16;break;case 13:t.prev=13,t.t1=t.catch(2),console.log(t.t1);case 16:this.$refs.list.scrollTop=0,this.loading=!1;case 18:case"end":return t.stop()}},t,this,[[2,13]])}));return function(e){return t.apply(this,arguments)}}(),addToPlayback:function(){var t=(0,i.default)(r.default.mark(function t(e){var n;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this[l.ADD_TRACK]({track:e}),this[l.UPDATE_QUEUE]({index:this.queueGroup.active,active:this.queue.length-1}),n=this.player.playing,t.next=5,this.playerController.playTrack(e);case 5:this.playingQueueIndex=this.queueGroup.active,"random"===this.activeVisualizerType&&(this.activeVisualizerType="random"),this[l.VISUALIZER_LISTEN_TO](this.player._sound._sounds[0]._node,e.picture),this[l.VISUALIZER_LOAD_RESOURCE]({picture:e.picture}),n||this[l.SWITCH_TO_VISUALIZER](),this[l.UPDATE_TRACK]({index:this.queue.active,duration:1e3*this.player.duration});case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),handleContextMenu:function(t){var e=this;this.$emit("contextMenu",function(n){"add"===n&&e.addToPlayback(t)})},fixDrag:function(){var t=document.querySelector(".sortable-fallback");t&&(t.style.width=this.$refs.list.offsetWidth)},mapMediaSourceIcon:c.mapMediaSourceIcon,mapMediaSourceName:c.mapMediaSourceName},(0,s.mapMutations)([l.UPDATE_QUEUE,l.UPDATE_PLAYING_QUEUE_INDEX,l.ADD_TRACK,l.UPDATE_TRACK,l.UPDATE_ACTIVE_VISUALIZER_TYPE,l.SWITCH_TO_VISUALIZER,l.VISUALIZER_LISTEN_TO,l.VISUALIZER_LOAD_RESOURCE])),filters:{formatDuration:c.formatDuration}}},447:function(t,e,n){"use strict";n.r(e);var a=n(446),r=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);e.default=r.a},449:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-pane"},[n("div",{staticClass:"tool-bar"},[n("div",{staticClass:"input-group input-group-sm"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.keywords,expression:"keywords"}],staticClass:"form-control",attrs:{placeholder:t.$t("Search for music"),type:"text"},domProps:{value:t.keywords},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.search(t.keywords)},input:function(e){e.target.composing||(t.keywords=e.target.value)}}}),n("span",{staticClass:"input-group-btn"},[n("button",{directives:[{name:"interact",rawName:"v-interact:tap",value:function(){t.search(t.keywords)},expression:"() => { search(keywords); }",arg:"tap"}],staticClass:"btn btn-default",attrs:{type:"button"}},[t._v(t._s(t.$t("Search")))])])])]),n("div",{ref:"list",staticClass:"list-wrap",class:{blur:t.loading}},[n("table",{staticClass:"table-condensed table table-hover"},[n("draggable",{attrs:{options:{group:{name:"tracks",pull:"clone",put:!1},sort:!1,handle:".drag-handle",forceFallback:!0,fallbackOnBody:!0},element:"tbody"},model:{value:t.tracks,callback:function(e){t.tracks=e},expression:"tracks"}},t._l(t.tracks,function(e){return n("tr",{directives:[{name:"interact",rawName:"v-interact:doubletap",value:function(){t.addToPlayback(e)},expression:"() => { addToPlayback(track); }",arg:"doubletap"}],on:{contextmenu:function(n){n.preventDefault(),t.handleContextMenu(e)}}},[n("td",{staticStyle:{padding:"0"}}),n("td",[t._v(t._s(e.name))]),n("td",[t._v(t._s(e.artists.map(function(t){return t.name}).join(", ")))]),e.duration?n("td",{staticStyle:{width:"46px"}},[t._v(t._s(t._f("formatDuration")(e.duration,"mm:ss")))]):n("td"),t.showSourceIcon?n("td",[n("img",{attrs:{src:t.mapMediaSourceIcon(e.id.split("_")[0]),alt:t.mapMediaSourceName(e.id.split("_")[0]),title:t.mapMediaSourceName(e.id.split("_")[0])}})]):t._e(),n("td",{staticClass:"drag-handle"},[n("svg",{attrs:{width:"20",height:"20",viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}})])])])}))],1)]),t.loading?n("vueLoading",{attrs:{type:"cylon",color:"#fff"}}):t._e()],1)},r=[];a._withStripped=!0,n.d(e,"a",function(){return a}),n.d(e,"b",function(){return r})},460:function(t,e,n){(t.exports=n(3)(void 0)).push([t.i,"\n.search-pane[data-v-58fce14d] {\n  height: 100%;\n}\n.search-pane .tool-bar[data-v-58fce14d] {\n    box-shadow: inset 0 -2px 1px -1.5px rgba(0, 0, 0, 0.2);\n    padding-bottom: 6px;\n}\n.search-pane .list-wrap[data-v-58fce14d] {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: calc(100% - 36px);\n    margin-top: 36px;\n    box-shadow: inset 0 2px 1px -1.5px rgba(255, 255, 255, 0.2);\n    overflow: auto;\n    transition: filter .5s;\n}\n.search-pane .vue-loading[data-v-58fce14d] {\n    position: absolute;\n    left: 0;\n    top: 36px;\n    right: 0;\n    bottom: 0;\n}\ntr[data-v-58fce14d] {\n  cursor: default;\n}\ntr.sortable-ghost[data-v-58fce14d] {\n    opacity: .5 !important;\n}\ntr td[data-v-58fce14d] {\n    word-wrap: break-word;\n    word-break: break-all;\n}\ntr td.drag-handle[data-v-58fce14d] {\n      width: 28px;\n      text-align: center;\n      cursor: move;\n      cursor: -webkit-grab;\n}\ntr td svg[data-v-58fce14d] {\n      width: 18px;\n      height: 18px;\n      fill: #fff;\n}\ntr td img[data-v-58fce14d] {\n      vertical-align: top;\n      width: 15px;\n      height: 15px;\n      margin-top: 2px;\n}\n.sortable-fallback[data-v-58fce14d] {\n  display: table;\n  position: absolute;\n  color: #fff;\n  opacity: .5;\n}\n.sortable-fallback td[data-v-58fce14d] {\n    padding: 5px;\n}\n",""])},461:function(t,e,n){"use strict";var a=n(445);n.n(a).a}}]);